<div class="container">
  <h1>Create New Post</h1>
  <form action="/post" method="POST" enctype="multipart/form-data">
    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" class="form-control" name="title" id="title" placeholder="Title" required>
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea class="form-control" name="content" id="description" rows="3" placeholder="Description" required></textarea>
    </div>
    <div class="form-group">
      <label for="category" class="form-label">Category</label>
      <select class="form-select" id="category" name="category_id" required>
        <option value="">Select Category...</option>
        <% if (categories && categories.length > 0) { %>
        <% categories.forEach(function(category) { %>
        <option value="<%= category._id %>"><%= category.name %></option>
        <% }); %>
        <% } else { %>
        <option value="">No categories available</option>
        <% } %>
      </select>
    </div>
    <div class="form-group">
      <label for="img">Image</label>
      <input type="file" class="form-control" name="img" id="img">
    </div>
    <div class="form-group">
      <label for="status">Status</label>
      <select class="form-control" name="status" id="status" required>
        <option value="draft">Draft</option>
        <option value="published">Published</option>
      </select>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>

<div class="container-fluid py-4">
  <div class="row">
    <div class="col-lg-9 col-12 mx-auto">
      <form action="/post" method="POST" enctype="multipart/form-data">
        <div class="card card-body mt-4">
          <h6 class="mb-0">New Post</h6>
          <p class="text-sm mb-0">Create new post</p>
          <hr class="horizontal dark my-3">
          <label for="projectName" class="form-label">Post Name</label>
          <input type="text" class="form-control" id="projectName">
          <label class="mt-4">Content Description</label>
          <p class="form-text text-muted text-xs ms-1">
            This is how others will learn about the content, so make it good!
          </p>
          <div id="editor">
            <p>Hello World!</p>
            <p>Some initial <strong>bold</strong> text</p>
            <p><br></p>
          </div>

          <label class="mt-4 form-label">Category Tags</label>
          <select class="form-select" id="choices-multiple-remove-button" name="category_id" required>
            <option value="">Select Category...</option>
            <% if (categories && categories.length > 0) { %>
            <% categories.forEach(function(category) { %>
            <option value="<%= category._id %>"><%= category.name %></option>
            <% }); %>
            <% } else { %>
            <option value="">No categories available</option>
            <% } %>
          </select>
          <div class="row">
            <div class="col-6">
              <label class="form-label">Status</label>
              <select class="form-control" name="status" id="status" required>
                <option value="draft">Draft</option>
                <option value="published">Published</option>
              </select>
            </div>
            <div class="col-6">
              <label class="form-label">Publish Date</label>
              <input class="form-control datetimepicker" type="date" placeholder="Please select publish date" data-input>
            </div>

          </div>
          <label class="mt-4 form-label">Starting Files</label>
          <form action="https://demos.creative-tim.com/file-upload" class="form-control dropzone" id="dropzone">
            <div class="fallback">
              <input name="file" type="file" multiple />
            </div>
          </form>
          <div class="d-flex justify-content-end mt-4">
            <button type="button" name="button" class="btn btn-light m-0">Cancel</button>
            <button type="submit" name="button" class="btn bg-gradient-primary m-0 ms-2">Create Posts</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="public/assets/js/plugins/choices.min.js"></script>
<script src="public/assets/js/plugins/quill.min.js"></script>
<script src="public/assets/js/plugins/flatpickr.min.js"></script>
<script src="public/assets/js/plugins/dropzone.min.js"></script>
<script>
  if (document.getElementById('editor')) {
    var quill = new Quill('#editor', {
      theme: 'snow' // Specify theme in configuration
    });
  }

  if (document.getElementById('choices-multiple-remove-button')) {
    var element = document.getElementById('choices-multiple-remove-button');
    const example = new Choices(element, {
      removeItemButton: true
    });

    example.setChoices(
      [{
          value: 'One',
          label: 'Label One',
          disabled: true
        },
        {
          value: 'Two',
          label: 'Label Two',
          selected: true
        },
        {
          value: 'Three',
          label: 'Label Three'
        },
      ],
      'value',
      'label',
      false,
    );
  }

  if (document.querySelector('.datetimepicker')) {
    flatpickr('.datetimepicker', {
      allowInput: true
    }); // flatpickr
  }

  Dropzone.autoDiscover = false;
  var drop = document.getElementById('dropzone')
  var myDropzone = new Dropzone(drop, {
    url: "/file/post",
    addRemoveLinks: true

  });
</script>