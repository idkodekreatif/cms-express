<section class="page-hero pt-16 pb-14">
  <div class="container">
    <div class="text-center">
      <ul class="breadcrumb inline-flex h-8 items-center justify-center space-x-2 rounded-3xl bg-theme-light px-4 py-2">
        <li class="leading-none text-dark">
          <a class="inline-flex items-center text-primary" href="#">
            <svg class="mr-1.5" width="15" height="15" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13.1769 15.0588H10.3533V9.41178H5.64744V15.0588H2.82391V6.58825H1.88274V16H14.118V6.58825H13.1769V15.0588ZM6.58862 15.0588V10.353H9.41215V15.0588H6.58862ZM15.8084 6.09225L15.2512 6.85178L8.00038 1.52472L0.749559 6.8499L0.192383 6.09131L8.00038 0.357666L15.8084 6.09225Z" fill="black" />
            </svg>
            <span class="text-sm leading-none">Home</span>
          </a>
        </li>
        <li class="leading-none text-dark">
          <span class="text-sm leading-none">/ Blog</span>
        </li>
      </ul>
    </div>
    <div class="page-hero-content mx-auto max-w-[768px] text-center">
      <h1 class="mb-5 mt-8">
        Insight and advice from <br />
        our expert team.
      </h1>
    </div>
  </div>
</section>
<!-- end Common hero -->

<section class="section pt-0">
  <div class="container">
    <h2 class="h4 mb-4">Featured Posts</h2>
    <div class="featured-posts row">
      <% popularPosts.forEach(post => { %>
      <div class="mb-8 md:col-6">
        <div class="card">
          <img class="card-img" width="235" height="304" src="<%= post.img %>" alt="" />
          <div class="card-content">
            <div class="card-tags">
              <a class="tag" href="#"><%= post.category_id.name %></a>
            </div>
            <h3 class="h4 card-title">
              <a href="/posts/<%= post._id %>"><%= post.title %></a>
            </h3>
            <p>
              <%= post.content %>
            </p>
            <div class="card-footer mt-6 flex space-x-4">
              <span class="inline-flex items-center text-xs text-[#666]">
                <svg class="mr-1.5" width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12.5 2H11V0.375C11 0.16875 10.8313 0 10.625 0H9.375C9.16875 0 9 0.16875 9 0.375V2H5V0.375C5 0.16875 4.83125 0 4.625 0H3.375C3.16875 0 3 0.16875 3 0.375V2H1.5C0.671875 2 0 2.67188 0 3.5V14.5C0 15.3281 0.671875 16 1.5 16H12.5C13.3281 16 14 15.3281 14 14.5V3.5C14 2.67188 13.3281 2 12.5 2ZM12.3125 14.5H1.6875C1.58438 14.5 1.5 14.4156 1.5 14.3125V5H12.5V14.3125C12.5 14.4156 12.4156 14.5 12.3125 14.5Z" fill="#939393" />
                </svg>
                <%= new Date(post.createdAt).toLocaleDateString() %>
              </span>
              <span class="inline-flex items-center text-xs text-[#666]">
                <svg class="mr-1.5" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M7.65217 0C3.42496 0 0 3.58065 0 8C0 12.4194 3.42496 16 7.65217 16C11.8794 16 15.3043 12.4194 15.3043 8C15.3043 3.58065 11.8794 0 7.65217 0ZM7.65217 14.4516C4.24264 14.4516 1.48107 11.5645 1.48107 8C1.48107 4.43548 4.24264 1.54839 7.65217 1.54839C11.0617 1.54839 13.8233 4.43548 13.8233 8C13.8233 11.5645 11.0617 14.4516 7.65217 14.4516ZM9.55905 11.0839L6.93941 9.09355C6.84376 9.01935 6.78822 8.90323 6.78822 8.78065V3.48387C6.78822 3.27097 6.95484 3.09677 7.15849 3.09677H8.14586C8.34951 3.09677 8.51613 3.27097 8.51613 3.48387V8.05484L10.5773 9.62258C10.7439 9.74839 10.7778 9.99032 10.6575 10.1645L10.0774 11C9.95708 11.171 9.72567 11.2097 9.55905 11.0839Z" fill="#939393" />
                </svg>
                <%= post.views %>
                To Read
              </span>
            </div>
          </div>
        </div>
      </div>
      <% }) %>
    </div>

    <div class="category-filter mb-10 mt-3 rounded-xl bg-[#EEEEEE] px-4">
      <ul class="filter-list">
        <li>
          <a class="filter-btn filter-btn-active btn btn-sm" href="javascript:void(0)" data-id="all">All Categories</a>
        </li>
        <% categories.forEach(category => { %>
        <li>
          <a class="filter-btn btn btn-sm" href="javascript:void(0)" data-id="<%= category._id %>"><%= category.name %></a>
        </li>
        <% }); %>
      </ul>
    </div>

    <h2 class="h4 mb-4">Latest Posts</h2>
    <div class="row">
      <div class="latest-posts-container row g-4">
        <!-- Container untuk postingan terbaru akan diisi oleh JavaScript -->
        <div class="row">
          <% latestPosts.forEach(latestPost => { %>
          <div class="mb-8 md:col-6 lg:col-4">
            <div class="card">
              <img class="card-img" width="335" height="210" src="<%= latestPost.img %>" alt="" />
              <div class="card-content">
                <div class="card-tags">
                  <a class="tag" href="#"><%= latestPost.category_id.name %></a>
                </div>
                <h3 class="h4 card-title">
                  <a href="/posts/<%= latestPost._id %>">
                    <%= latestPost.title %>
                  </a>
                </h3>
                <p>
                  <%= latestPost.content %>
                </p>
                <div class="card-footer mt-6 flex space-x-4">
                  <span class="inline-flex items-center text-xs text-[#666]">
                    <svg class="mr-1.5" width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12.5 2H11V0.375C11 0.16875 10.8313 0 10.625 0H9.375C9.16875 0 9 0.16875 9 0.375V2H5V0.375C5 0.16875 4.83125 0 4.625 0H3.375C3.16875 0 3 0.16875 3 0.375V2H1.5C0.671875 2 0 2.67188 0 3.5V14.5C0 15.3281 0.671875 16 1.5 16H12.5C13.3281 16 14 15.3281 14 14.5V3.5C14 2.67188 13.3281 2 12.5 2ZM12.3125 14.5H1.6875C1.58438 14.5 1.5 14.4156 1.5 14.3125V5H12.5V14.3125C12.5 14.4156 12.4156 14.5 12.3125 14.5Z" fill="#939393" />
                    </svg>
                    <%= new Date(latestPost.createdAt).toLocaleDateString() %>
                  </span>
                  <span class="inline-flex items-center text-xs text-[#666]">
                    <svg class="mr-1.5" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M7.65217 0C3.42496 0 0 3.58065 0 8C0 12.4194 3.42496 16 7.65217 16C11.8794 16 15.3043 12.4194 15.3043 8C15.3043 3.58065 11.8794 0 7.65217 0ZM7.65217 14.4516C4.24264 14.4516 1.48107 11.5645 1.48107 8C1.48107 4.43548 4.24264 1.54839 7.65217 1.54839C11.0617 1.54839 13.8233 4.43548 13.8233 8C13.8233 11.5645 11.0617 14.4516 7.65217 14.4516ZM9.55905 11.0839L6.93941 9.09355C6.84376 9.01935 6.78822 8.90323 6.78822 8.78065V3.48387C6.78822 3.27097 6.95484 3.09677 7.15849 3.09677H8.14586C8.34951 3.09677 8.51613 3.27097 8.51613 3.48387V8.05484L10.5773 9.62258C10.7439 9.74839 10.7778 9.99032 10.6575 10.1645L10.0774 11C9.95708 11.171 9.72567 11.2097 9.55905 11.0839Z" fill="#939393" />
                    </svg>
                    <%= latestPost.views %> Min To Read
                  </span>
                </div>
              </div>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
      <p class="no-posts-msg hidden">No posts found for selected category.</p>
    </div>
  </div>
</section>

<!-- Kode HTML untuk tampilan blog -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
  $(document).ready(function() {
    // Mengatur aksi klik pada setiap tombol kategori
    $('.filter-btn').click(function() {
      $('.filter-btn').removeClass('filter-btn-active');
      $(this).addClass('filter-btn-active');
      var categoryId = $(this).data('id');

      // Memuat portofolio berdasarkan kategori atau menampilkan semua
      if (categoryId === 'all') {
        displayAllPosts();
      } else {
        $.ajax({
          url: '/api/posts',
          method: 'GET',
          data: {
            category_id: categoryId
          },
          success: function(data) {
            displayPosts(data.posts);
          },
          error: function(xhr, status, error) {
            console.error(xhr.responseText);
          }
        });
      }
    });

    function displayAllPosts() {
      $.ajax({
        url: '/api/posts',
        method: 'GET',
        data: {
          category_id: 'all'
        },
        success: function(data) {
          displayPosts(data.posts);
        },
        error: function(xhr, status, error) {
          console.error(xhr.responseText);
        }
      });
    }

    function displayPosts(posts) {
      var html = '';
      if (posts.length > 0) {
        posts.forEach(function(post) {
          html += buildPostHtml(post);
        });
      } else {
        html = '<div class="col-12 text-sm"><h3>No Posts Found</h3></div>';
      }
      $('.latest-posts-container').html(html); // Update konten HTML dari kontainer postingan terbaru
    }

    function buildPostHtml(post) {
      return `
     <div class="row">
       <div class="latest-posts-container row g-4">
         <!-- Container untuk postingan terbaru akan diisi oleh JavaScript -->
         <div class="row">
           <div class="mb-8 md:col-6 lg:col-4">
             <div class="card">
               <img class="card-img" width="335" height="210" src="${post.img}" alt="${post.title}" />
               <div class="card-content">
                 <div class="card-tags">
                   <a class="tag" href="#">${post.category_id.name}</a>
                 </div>
                 <h3 class="h4 card-title">
                   <a href="/posts/${post._id}">
                     ${post.title}
                   </a>
                 </h3>
                 <p>
                   ${post.content}
                 </p>
                 <div class="card-footer mt-6 flex space-x-4">
                   <span class="inline-flex items-center text-xs text-[#666]">
                     <svg class="mr-1.5" width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M12.5 2H11V0.375C11 0.16875 10.8313 0 10.625 0H9.375C9.16875 0 9 0.16875 9 0.375V2H5V0.375C5 0.16875 4.83125 0 4.625 0H3.375C3.16875 0 3 0.16875 3 0.375V2H1.5C0.671875 2 0 2.67188 0 3.5V14.5C0 15.3281 0.671875 16 1.5 16H12.5C13.3281 16 14 15.3281 14 14.5V3.5C14 2.67188 13.3281 2 12.5 2ZM12.3125 14.5H1.6875C1.58438 14.5 1.5 14.4156 1.5 14.3125V5H12.5V14.3125C12.5 14.4156 12.4156 14.5 12.3125 14.5Z" fill="#939393" />
                     </svg>
                      ${new Date(post.createdAt).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                   </span>
                   <span class="inline-flex items-center text-xs text-[#666]">
                     <svg class="mr-1.5" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M7.65217 0C3.42496 0 0 3.58065 0 8C0 12.4194 3.42496 16 7.65217 16C11.8794 16 15.3043 12.4194 15.3043 8C15.3043 3.58065 11.8794 0 7.65217 0ZM7.65217 14.4516C4.24264 14.4516 1.48107 11.5645 1.48107 8C1.48107 4.43548 4.24264 1.54839 7.65217 1.54839C11.0617 1.54839 13.8233 4.43548 13.8233 8C13.8233 11.5645 11.0617 14.4516 7.65217 14.4516ZM9.55905 11.0839L6.93941 9.09355C6.84376 9.01935 6.78822 8.90323 6.78822 8.78065V3.48387C6.78822 3.27097 6.95484 3.09677 7.15849 3.09677H8.14586C8.34951 3.09677 8.51613 3.27097 8.51613 3.48387V8.05484L10.5773 9.62258C10.7439 9.74839 10.7778 9.99032 10.6575 10.1645L10.0774 11C9.95708 11.171 9.72567 11.2097 9.55905 11.0839Z" fill="#939393" />
                     </svg>
                     ${post.views} Min To Read
                   </span>
                 </div>
               </div>
             </div>
           </div>
         </div>
       </div>
       <p class="no-posts-msg hidden">No posts found for selected category.</p>
     </div>
    `;
    }

  });
</script>